# Roadmap: SpecHack — Hackathon Landing Page

## Overview

This roadmap guides the migration of SpecHack from a Vite/React SPA prototype to a production Next.js 16 app within the 404tf monorepo. The journey follows a foundation-first approach: establishing correct architectural patterns (Phase 1), migrating static content as Server Components (Phase 2), layering animations and interactivity (Phase 3), adding database-backed forms (Phase 4), implementing the trading card identity system (Phase 5), creating viral challenge routes with dynamic OG images (Phase 6), and finishing with UX polish (Phase 7). Each phase builds on the previous, respecting technical dependencies and preventing common migration pitfalls.

## Phases

**Phase Numbering:**
- Integer phases (1, 2, 3): Planned milestone work
- Decimal phases (2.1, 2.2): Urgent insertions (marked with INSERTED)

Decimal phases appear between their surrounding integers in numeric order.

- [x] **Phase 1: Foundation** - Bootstrap Next.js 16 app with correct architectural patterns
- [x] **Phase 2: Static Content Migration** - Port existing sections as Server Components
- [x] **Phase 3: Animations & Interactivity** - Layer scroll animations and accordion component
- [x] **Phase 4: Forms & Database** - Implement registration and ambassador backend
- [x] **Phase 5: Trading Cards** - Build deterministic card system with Canvas export
- [x] **Phase 6: Challenge System** - Create viral shareable links with dynamic OG images
- [x] **Phase 7: Polish & Edge Cases** - Add UX refinements and error handling

## Phase Details

### Phase 1: Foundation
**Goal**: Establish correct architectural patterns and infrastructure to prevent cascading migration pitfalls
**Depends on**: Nothing (first phase)
**Requirements**: FOUND-01, FOUND-02, FOUND-03, FOUND-04, FOUND-05
**Success Criteria** (what must be TRUE):
  1. Developer can run `bun run dev` and see a working Next.js 16 app at both `/es/` and `/en/` routes with correct locale handling
  2. Dark theme with blueprint grid background, purple/cyan accents, and correct fonts (Orbitron, JetBrains Mono, Inter) renders on page load
  3. Developer can import MotionDiv, MotionSection, etc. wrapper components in any Server Component without causing "use client" cascade
  4. Database queries return spechack_participants data with correct TypeScript types auto-generated by Drizzle
  5. Tailwind v4 CSS custom properties work without @apply errors, confirmed by compiling a test component with theme variables
**Plans**: 3 plans

Plans:
- [x] 01-01-PLAN.md — App bootstrap: deps, Tailwind v4 theme, next-intl routing, fonts, bilingual page structure
- [x] 01-02-PLAN.md — Database schema extension: spechack_participants and spechack_ambassadors tables
- [x] 01-03-PLAN.md — Framer Motion wrappers: MotionDiv, MotionSection, MotionSpan, FadeInSection

### Phase 2: Static Content Migration
**Goal**: Port all static landing sections from Vite SPA to Next.js Server Components with bilingual content
**Depends on**: Phase 1
**Requirements**: LAND-01, LAND-02, LAND-03, LAND-04, LAND-05, LAND-06, LAND-07, LAND-08, LAND-09, LAND-11
**Success Criteria** (what must be TRUE):
  1. User can toggle between ES/EN languages via Navbar and see URL change to `/es/` or `/en/` with all content updating correctly
  2. User scrolling on desktop sees Navbar background become opaque, and can click all navigation links to jump to sections
  3. User on mobile can tap hamburger menu icon, see drawer open with navigation links, and close it
  4. User sees all 7 landing sections (Hero, Manifesto, Judging, Hubs, Sponsors, FAQ, Footer) with correct bilingual content matching the locale in the URL
  5. User can click FAQ accordion items and see them expand/collapse with smooth transitions without requiring JavaScript reload
**Plans**: 4 plans

Plans:
- [x] 02-01-PLAN.md — Bilingual translations, i18n navigation, useScrollDirection hook, scroll CSS
- [x] 02-02-PLAN.md — Navbar client component, Hero and Manifesto server components
- [x] 02-03-PLAN.md — Judging, Hubs, and Sponsors server components
- [x] 02-04-PLAN.md — FAQ, Footer, page composition, and visual verification checkpoint

### Phase 3: Animations & Interactivity
**Goal**: Layer scroll-triggered animations and interactive UI elements using motion wrappers from Phase 1
**Depends on**: Phase 2
**Requirements**: LAND-08 (accordion animation), LAND-10 (sticky button)
**Success Criteria** (what must be TRUE):
  1. User scrolling down the page sees sections fade in as they enter viewport with staggered timing
  2. User scrolling past the Hero section sees a sticky "Register" button appear at the bottom of the viewport
  3. User clicking the sticky register button scrolls smoothly back to the Hero registration form
  4. User sees Judging criteria progress bars animate from 0% to target value when section enters viewport
  5. FAQ accordion items expand/collapse with smooth height transitions and rotate chevron icons
**Plans**: 3 plans

Plans:
- [x] 03-01-PLAN.md — Section fade-in wrappers, Hero stagger entrance, Manifesto card stagger
- [x] 03-02-PLAN.md — Animated progress bars (Judging), FAQ accordion with smooth height transitions
- [x] 03-03-PLAN.md — Sticky register button with IntersectionObserver + AnimatePresence

### Phase 4: Forms & Database
**Goal**: Implement database-backed registration and ambassador applications with Server Actions and validation
**Depends on**: Phase 1 (database schema), Phase 2 (form UI), Phase 3 (animations)
**Requirements**: REG-01, REG-02, REG-03, REG-04, AMB-01, AMB-02, SEO-01
**Success Criteria** (what must be TRUE):
  1. User can fill out registration form (name, email, city, track), submit, and receive a persistent SPEC-XXXX agent number stored in Neon Postgres
  2. Second user registering receives SPEC-XXXX+1 sequential agent number with no collisions
  3. User submitting form with duplicate email sees their existing card data returned without creating a new record
  4. User can fill out ambassador application form in Hubs section, submit, and see success confirmation with data stored in database
  5. Landing page displays correct static metadata (title, description, OG image) when shared on social media in both ES and EN locales
**Plans**: 3 plans

Plans:
- [x] 04-01-PLAN.md — Schema fixes + card-utils + Server Actions (backend foundation)
- [x] 04-02-PLAN.md — Client form components (RegistrationForm + AmbassadorForm)
- [x] 04-03-PLAN.md — SEO metadata + translations + verification checkpoint

### Phase 5: Trading Cards
**Goal**: Build deterministic trading card generation system with Canvas PNG export and card reveal animation
**Depends on**: Phase 4 (registration creates participant records)
**Requirements**: CARD-01, CARD-02, CARD-03, CARD-04, CARD-05, CARD-06, CARD-07, CARD-08, CARD-09
**Success Criteria** (what must be TRUE):
  1. User completing registration sees animated card reveal (scale, rotate, fade stagger) displaying their unique trading card with agent number, name, city with country flag, track badge, and builder class
  2. User's card shows deterministic gradient (same name always produces same gradient + angle combination) and randomly assigned builder class from 6 options
  3. User can click "Download Card" button and receive a 600x800px PNG file generated via Canvas API with all card elements rendered correctly
  4. User can click social share buttons to open pre-filled X tweet, WhatsApp message, or LinkedIn post with their challenge link, or copy link to clipboard
  5. User seeing Hero section before registration views fanned preview of 4 example trading cards with hover tilt animation
  6. User refreshing page or visiting later sees their existing card data loaded from database without re-registration
**Plans**: 4 plans

Plans:
- [x] 05-01-PLAN.md — Card utilities and types: CardData, CITY_FLAGS, Canvas/download/localStorage functions, share URL builders, translations
- [x] 05-02-PLAN.md — TradingCard visual component: port blueprint design with Next.js adaptations
- [x] 05-03-PLAN.md — CardReveal + RegistrationForm integration: animated reveal, action buttons, localStorage persistence
- [x] 05-04-PLAN.md — TradingCardPreview + Hero integration: fanned card preview in Hero left column

### Phase 6: Challenge System
**Goal**: Create shareable challenge routes with deterministic card previews and dynamic OG images for viral growth
**Depends on**: Phase 5 (trading card system)
**Requirements**: CHAL-01, CHAL-02, CHAL-03, CHAL-04, SEO-02, SEO-03
**Success Criteria** (what must be TRUE):
  1. User visiting `/es/c/Maria` or `/en/c/Maria` sees a deterministic trading card for "Maria" with same gradient, builder class, and agent number every time
  2. Challenge page displays "[Name] challenges you to join SpecHack" header with "Do you accept?" prompt and registration form below
  3. User filling out registration form on challenge page and submitting sees their own card reveal animation (not the challenger's card)
  4. User sharing `/c/[name]` link on X, WhatsApp, or LinkedIn sees dynamic OG image preview showing the challenger's trading card with name, agent number, and builder class rendered via ImageResponse
**Plans**: 3 plans

Plans:
- [x] 06-01-PLAN.md — Deterministic Card Generation & Translations: generateDeterministicCard(), locale-aware challenge URLs, bilingual challenge translations
- [x] 06-02-PLAN.md — Challenge Page Route: /[locale]/c/[name]/page.tsx with card preview, challenge prompt, registration form, dynamic metadata
- [x] 06-03-PLAN.md — Dynamic OG Image Route: opengraph-image.tsx with ImageResponse, custom fonts, Satori-compatible layout

### Phase 7: Polish & Edge Cases
**Goal**: Add UX refinements, loading states, error boundaries, and edge case handling for production readiness
**Depends on**: Phase 6 (core viral loop complete)
**Requirements**: None (polish and error handling not in explicit requirements but necessary for production)
**Success Criteria** (what must be TRUE):
  1. User with slow network sees skeleton loading states for sections and forms instead of blank screen or layout shift
  2. User encountering database error during registration sees graceful error boundary with retry option instead of white screen crash
  3. User submitting form sees disabled button with loading spinner, preventing double submissions
  4. User scrolling the page experiences smooth 60fps animations without jank on mid-range devices
  5. Developer can inspect browser console and see no React hydration warnings or errors in production build
**Plans**: 3 plans

Plans:
- [x] 07-01-PLAN.md — Toast component, challenge page loading skeleton, error boundary, error translations
- [x] 07-02-PLAN.md — Form UX: submit spinners, on-blur validation, server error toasts, ambassador collapse animation
- [x] 07-03-PLAN.md — Edge cases: name truncation, invalid challenge URL redirect, build verification

## Progress

**Execution Order:**
Phases execute in numeric order: 1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7

| Phase | Plans Complete | Status | Completed |
|-------|----------------|--------|-----------|
| 1. Foundation | 3/3 | Complete | 2026-02-13 |
| 2. Static Content Migration | 4/4 | Complete | 2026-02-14 |
| 3. Animations & Interactivity | 3/3 | Complete | 2026-02-14 |
| 4. Forms & Database | 3/3 | Complete | 2026-02-14 |
| 5. Trading Cards | 4/4 | Complete | 2026-02-14 |
| 6. Challenge System | 3/3 | Complete | 2026-02-14 |
| 7. Polish & Edge Cases | 3/3 | Complete | 2026-02-14 |
