---
phase: 04-forms-database
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - apps/spechack/messages/es.json
  - apps/spechack/messages/en.json
  - apps/spechack/src/lib/metadata/seo-config.ts
  - apps/spechack/src/app/[locale]/layout.tsx
  - apps/spechack/public/og-spechack.png
autonomous: false
must_haves:
  truths:
    - "Landing page has locale-aware title and description in HTML head"
    - "Sharing page link on social media shows SpecHack OG image with correct title/description per locale"
    - "Both /es/ and /en/ routes have distinct metadata matching the locale"
  artifacts:
    - path: "apps/spechack/src/lib/metadata/seo-config.ts"
      provides: "SITE_NAME, SITE_URL constants for SpecHack"
      exports: ["SITE_NAME", "SITE_URL"]
    - path: "apps/spechack/src/app/[locale]/layout.tsx"
      provides: "generateMetadata function with locale-aware OG metadata"
      contains: "generateMetadata"
    - path: "apps/spechack/messages/es.json"
      provides: "metadata namespace with title, description, ogImageAlt in Spanish"
      contains: "metadata"
    - path: "apps/spechack/messages/en.json"
      provides: "metadata namespace with title, description, ogImageAlt in English"
      contains: "metadata"
  key_links:
    - from: "apps/spechack/src/app/[locale]/layout.tsx"
      to: "apps/spechack/src/lib/metadata/seo-config.ts"
      via: "import SITE_NAME, SITE_URL"
      pattern: "SITE_NAME|SITE_URL"
    - from: "apps/spechack/src/app/[locale]/layout.tsx"
      to: "apps/spechack/messages/es.json"
      via: "getTranslations({ locale, namespace: 'metadata' })"
      pattern: "getTranslations.*metadata"
---

<objective>
Add locale-aware SEO metadata and form validation translations.

Purpose: Ensure the landing page displays correct title, description, and OG image when shared on social media in both ES and EN locales (SEO-01), and add missing translation keys for form validation.
Output: generateMetadata function in layout.tsx, seo-config.ts constants, metadata translations, OG image placeholder.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-forms-database/04-RESEARCH.md
@.planning/phases/04-forms-database/04-01-SUMMARY.md

@apps/spechack/src/app/[locale]/layout.tsx
@apps/spechack/messages/es.json
@apps/spechack/messages/en.json
@apps/landing/src/app/[locale]/layout.tsx
@apps/landing/src/lib/metadata/seo-config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add metadata translations and SEO config</name>
  <files>
    apps/spechack/messages/es.json
    apps/spechack/messages/en.json
    apps/spechack/src/lib/metadata/seo-config.ts
  </files>
  <action>
  **A) Add `metadata` namespace to `messages/es.json`:**

  Add a new top-level `"metadata"` key:
  ```json
  "metadata": {
    "title": "SpecHack 2026 | Piensa Primero, Construye con IA",
    "description": "Hackathon global de 10 dias. 3 dias de diseno, 6 de construccion con IA, 1 de presentacion. Junio 19-28, 2026. Gratis, hibrido, global.",
    "ogImageAlt": "SpecHack 2026 - Hackathon Global"
  }
  ```

  **B) Add `metadata` namespace to `messages/en.json`:**
  ```json
  "metadata": {
    "title": "SpecHack 2026 | Think First, Build with AI",
    "description": "10-day global hackathon. 3 days of design, 6 days building with AI, 1 day presenting. June 19-28, 2026. Free, hybrid, global.",
    "ogImageAlt": "SpecHack 2026 - Global Hackathon"
  }
  ```

  **C) Create `apps/spechack/src/lib/metadata/seo-config.ts`:**

  Follow the landing app's `seo-config.ts` pattern:
  ```typescript
  /**
   * Central SEO configuration for SpecHack
   * Single source of truth for site metadata and URLs
   */

  export const SITE_URL = process.env.NEXT_PUBLIC_SITE_URL || "https://spechack.404tf.com";
  export const SITE_NAME = "SpecHack 2026";
  ```

  Create the directory `apps/spechack/src/lib/metadata/` first if it does not exist.

  Keep it minimal -- no social links needed for SpecHack at this point.
  </action>
  <verify>
  1. Both JSON files are valid JSON (no trailing commas, correct nesting)
  2. Both have `metadata.title`, `metadata.description`, `metadata.ogImageAlt` keys
  3. seo-config.ts exports `SITE_URL` and `SITE_NAME`
  4. `bun run check` passes Biome lint on all modified files
  </verify>
  <done>
  - Both translation files have metadata namespace with title, description, ogImageAlt
  - seo-config.ts provides SITE_URL and SITE_NAME constants
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace static metadata with generateMetadata in layout.tsx</name>
  <files>
    apps/spechack/src/app/[locale]/layout.tsx
    apps/spechack/public/og-spechack.png
  </files>
  <action>
  **A) Create OG image placeholder:**

  Create a simple 1200x630 OG image placeholder at `apps/spechack/public/og-spechack.png`. Use a solid dark background (#0a0a0f) with "SpecHack 2026" text. This can be a minimal placeholder -- Phase 6 will implement dynamic OG images.

  If creating a real image is complex, create a minimal valid PNG file. The important thing is the file exists at that path so the metadata reference is valid. An alternative: use an SVG-based approach or just reference the path in metadata and note the placeholder needs a real design asset later.

  Actually, the simplest approach: just reference `/og-spechack.png` in the metadata and create a TODO comment. The OG image URL will resolve but return 404 until a real image is provided -- this is acceptable for development. Skip creating a fake PNG.

  **B) Update `apps/spechack/src/app/[locale]/layout.tsx`:**

  1. Remove the static `export const metadata` object entirely.

  2. Add imports:
     ```typescript
     import { getTranslations } from "next-intl/server";
     import { SITE_NAME, SITE_URL } from "@/lib/metadata/seo-config";
     ```

  3. Add `generateMetadata` function -- follow the landing app's pattern exactly:
     ```typescript
     export async function generateMetadata({
       params,
     }: {
       params: Promise<{ locale: string }>;
     }): Promise<Metadata> {
       const { locale } = await params;
       const t = await getTranslations({ locale, namespace: "metadata" });

       return {
         metadataBase: new URL(SITE_URL),
         title: {
           template: `%s | ${SITE_NAME}`,
           default: t("title"),
         },
         description: t("description"),
         alternates: {
           canonical: `/${locale}`,
           languages: {
             es: "/es",
             en: "/en",
           },
         },
         openGraph: {
           title: t("title"),
           description: t("description"),
           url: `/${locale}`,
           siteName: SITE_NAME,
           locale: locale === "es" ? "es_ES" : "en_US",
           type: "website",
           images: [
             {
               url: "/og-spechack.png",
               width: 1200,
               height: 630,
               alt: t("ogImageAlt"),
             },
           ],
         },
         twitter: {
           card: "summary_large_image",
           title: t("title"),
           description: t("description"),
           images: ["/og-spechack.png"],
         },
         robots: {
           index: true,
           follow: true,
           googleBot: {
             index: true,
             follow: true,
             "max-image-preview": "large",
             "max-snippet": -1,
           },
         },
       };
     }
     ```

  4. Keep the existing `generateStaticParams`, `LocaleLayout` default export, and `NextIntlClientProvider` exactly as they are. Only change is replacing static metadata with the generateMetadata function.

  5. The `getMessages` import is already present and used in `LocaleLayout` -- keep it. Add `getTranslations` as an additional import from `"next-intl/server"`.
  </action>
  <verify>
  1. `bun run build` compiles without errors
  2. `bun run check` passes Biome lint
  3. layout.tsx has `generateMetadata` function (not static `metadata` export)
  4. layout.tsx imports `SITE_NAME`, `SITE_URL` from `@/lib/metadata/seo-config`
  5. `bun run dev` -- visit `/es/` and `/en/`, inspect page source for `<title>` and `<meta name="description">` tags showing correct locale-specific content
  </verify>
  <done>
  - layout.tsx has async generateMetadata with locale-aware title, description, OG metadata
  - /es/ route shows Spanish metadata, /en/ route shows English metadata
  - OG image reference points to /og-spechack.png (placeholder for Phase 6)
  - Twitter card metadata configured
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify forms and metadata in dev</name>
  <what-built>
  Complete Phase 4 implementation:
  - Registration form in Hero section (submits to database, returns agent number)
  - Ambassador form in Hubs section (expandable, submits to database)
  - Locale-aware SEO metadata (title, description, OG tags)
  </what-built>
  <how-to-verify>
  Start dev server: `bun run dev` from apps/spechack/

  **Registration form (Hero section):**
  1. Visit http://localhost:3000/es/ and scroll to the registration form
  2. Submit with empty fields -- should see validation errors
  3. Fill in name, email, city, select a track, and submit
  4. Should see success message with SPEC-0001 agent number
  5. Submit again with the SAME email -- should see existing data returned (not a new record)
  6. Submit with a DIFFERENT email -- should see SPEC-0002

  **Ambassador form (Hubs section):**
  7. Scroll to Hubs section
  8. Click "Apply to Host a Hub" button -- form should expand
  9. Submit with invalid data -- should see validation errors
  10. Fill in all fields and submit -- should see success confirmation

  **SEO metadata:**
  11. View page source at /es/ -- check for Spanish title and description in HTML head
  12. View page source at /en/ -- check for English title and description
  13. Verify og:title, og:description, og:image meta tags are present

  **Language switching:**
  14. Switch between ES and EN -- forms should reset, metadata should update
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `bun run build` compiles the full app without errors
2. `bun run check` passes Biome lint for all files
3. Registration creates database records with sequential agent numbers
4. Duplicate email handling works (returns existing data)
5. Ambassador form submits successfully
6. Both locales show correct metadata in page source
7. OG metadata tags present for social sharing
</verification>

<success_criteria>
- SEO-01: Both /es/ and /en/ have correct locale-specific metadata (title, description, OG image) in page source
- Form validation translations exist for both locales
- Full end-to-end: registration form creates record, returns agent number, handles duplicates
- Full end-to-end: ambassador form expands, submits, shows confirmation
- Human verification confirms all functionality works in dev
</success_criteria>

<output>
After completion, create `.planning/phases/04-forms-database/04-03-SUMMARY.md`
</output>
