---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/spechack/package.json
  - apps/spechack/postcss.config.cjs
  - apps/spechack/next.config.ts
  - apps/spechack/src/styles/globals.css
  - apps/spechack/src/styles/fonts.ts
  - apps/spechack/src/lib/utils.ts
  - apps/spechack/src/i18n/routing.ts
  - apps/spechack/src/i18n/request.ts
  - apps/spechack/src/proxy.ts
  - apps/spechack/src/app/layout.tsx
  - apps/spechack/src/app/[locale]/layout.tsx
  - apps/spechack/src/app/[locale]/page.tsx
  - apps/spechack/src/app/[locale]/not-found.tsx
  - apps/spechack/messages/es.json
  - apps/spechack/messages/en.json
autonomous: true

must_haves:
  truths:
    - "Developer can run bun run dev and see a working app at /es/ and /en/ with correct locale handling"
    - "Dark theme with blueprint grid background, purple/cyan accents renders on page load"
    - "Orbitron, JetBrains Mono, and Inter fonts load and apply correctly (headings use Orbitron, body uses Inter)"
    - "Tailwind v4 CSS custom properties work without @apply errors"
    - "Visiting / redirects to /es/ (default locale)"
  artifacts:
    - path: "apps/spechack/src/proxy.ts"
      provides: "next-intl middleware for locale routing"
      contains: "createMiddleware"
    - path: "apps/spechack/src/i18n/routing.ts"
      provides: "Locale routing config with always-prefix"
      contains: "localePrefix.*always"
    - path: "apps/spechack/src/i18n/request.ts"
      provides: "next-intl request config with message loading"
      contains: "getRequestConfig"
    - path: "apps/spechack/src/styles/globals.css"
      provides: "Tailwind v4 theme with SpecHack colors and blueprint grid"
      contains: "@theme"
    - path: "apps/spechack/src/styles/fonts.ts"
      provides: "Font definitions for Orbitron, Inter, JetBrains Mono"
      contains: "JetBrains_Mono"
    - path: "apps/spechack/src/app/layout.tsx"
      provides: "Root layout with font CSS variables and global styles import"
      contains: "font-orbitron"
    - path: "apps/spechack/src/app/[locale]/layout.tsx"
      provides: "Locale layout with NextIntlClientProvider and setRequestLocale"
      contains: "NextIntlClientProvider"
    - path: "apps/spechack/src/app/[locale]/page.tsx"
      provides: "Home page using translations and theme classes"
      contains: "getTranslations"
    - path: "apps/spechack/messages/es.json"
      provides: "Spanish translations"
    - path: "apps/spechack/messages/en.json"
      provides: "English translations"
  key_links:
    - from: "apps/spechack/src/proxy.ts"
      to: "apps/spechack/src/i18n/routing.ts"
      via: "import routing config"
      pattern: 'import.*routing.*from.*@/i18n/routing'
    - from: "apps/spechack/src/app/[locale]/layout.tsx"
      to: "apps/spechack/src/i18n/routing.ts"
      via: "locale validation"
      pattern: "hasLocale.*routing\\.locales"
    - from: "apps/spechack/src/i18n/request.ts"
      to: "apps/spechack/messages/"
      via: "dynamic import of locale JSON"
      pattern: 'import.*messages.*locale.*json'
    - from: "apps/spechack/next.config.ts"
      to: "next-intl/plugin"
      via: "withNextIntl wrapper"
      pattern: "createNextIntlPlugin"
    - from: "apps/spechack/src/app/layout.tsx"
      to: "apps/spechack/src/styles/globals.css"
      via: "CSS import"
      pattern: 'import.*@/styles/globals.css'
---

<objective>
Bootstrap the SpecHack Next.js 16 app with Tailwind v4 theming, next-intl bilingual routing, and the SpecHack dark theme with fonts.

Purpose: This is the core app foundation. Nothing else in Phase 1 can work without dependencies installed, Tailwind configured, i18n routing active, and the theme rendering. This plan transforms the bare placeholder app into a fully functional bilingual Next.js 16 app with the SpecHack visual identity.

Output: A running app where `bun run dev` serves `/es/` and `/en/` routes with dark theme, blueprint grid background, purple/cyan accents, and correct fonts (Orbitron headings, Inter body, JetBrains Mono for code/accent text).
</objective>

<execution_context>
@/home/hybridz/.claude/get-shit-done/workflows/execute-plan.md
@/home/hybridz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and create configuration files</name>
  <files>
    apps/spechack/package.json
    apps/spechack/postcss.config.cjs
    apps/spechack/src/styles/globals.css
    apps/spechack/src/styles/fonts.ts
    apps/spechack/src/lib/utils.ts
  </files>
  <action>
Install all required dependencies for the SpecHack app. Run from `apps/spechack/`:

```bash
bun add next-intl framer-motion clsx tailwind-merge zod lucide-react
bun add -D tailwindcss@"~4.0.0" @tailwindcss/postcss postcss @biomejs/biome
```

CRITICAL: tailwindcss MUST be pinned to `~4.0.0` range. Versions 4.1.18+ have a critical Turbopack build failure bug (PostCSS "invalid code point" error). Verify after install that the resolved version is 4.0.x, NOT 4.1.x.

After installing, create these configuration files:

**postcss.config.cjs** - PostCSS config for Tailwind v4 (use CommonJS format matching the landing app):
```javascript
"use strict";
module.exports = {
	plugins: {
		"@tailwindcss/postcss": {},
	},
};
```

**src/styles/globals.css** - Tailwind v4 CSS-first theme with SpecHack colors and blueprint grid:
- Start with `@import "tailwindcss";`
- `@theme` block with color tokens consuming HSL variables from `:root` (background, foreground, primary, secondary, spec-green, card, card-foreground, muted, muted-foreground, border, input, ring)
- Radius tokens (sm, md, lg)
- `:root` block with SpecHack HSL values:
  - `--background: 240 10% 6.7%` (dark blue-gray)
  - `--foreground: 0 0% 98%` (near white)
  - `--primary: 261 85% 50%` (purple)
  - `--secondary: 199 95% 60%` (cyan)
  - `--spec-green: 142 71% 45%` (accent green)
  - `--card: 240 10% 10%`
  - `--card-foreground: 0 0% 98%`
  - `--muted: 240 6% 15%`
  - `--muted-foreground: 0 0% 64%`
  - `--border: 240 6% 20%`
  - `--input: 240 6% 20%`
  - `--ring: 261 85% 50%`
  - `--radius: 0.5rem`
- `@layer base` with: `*` border-color, `body` bg/color/font-family (Inter), headings font-family (Orbitron)
- `@layer utilities` with: `.blueprint-grid` (purple-tinted grid lines at 40px intervals), `.purple-glow` (text-shadow), `.font-orbitron`, `.font-mono-accent` (JetBrains Mono with letter-spacing)

Use the exact research patterns from 01-RESEARCH.md. Do NOT use `@apply` with theme variables.

**src/styles/fonts.ts** - Font definitions using next/font/google:
- `inter`: Inter with `--font-inter` variable, latin subset, swap display
- `orbitron`: Orbitron with `--font-orbitron` variable, weights 400-900, latin subset, swap display
- `jetbrainsMono`: JetBrains_Mono with `--font-mono` variable, weights 400-700, latin subset, swap display

All three must be named exports (no default export).

**src/lib/utils.ts** - cn utility function combining clsx + tailwind-merge (same pattern as landing app):
```typescript
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
	return twMerge(clsx(inputs));
}
```
  </action>
  <verify>
1. Run `bun pm ls --depth 0` from apps/spechack/ and confirm tailwindcss version is 4.0.x (NOT 4.1.x)
2. Run `bun pm ls --depth 0` and confirm next-intl, framer-motion, clsx, tailwind-merge, zod, lucide-react are installed
3. Verify postcss.config.cjs exists and references @tailwindcss/postcss
4. Verify globals.css contains `@import "tailwindcss"`, `@theme`, `:root`, `blueprint-grid`, and does NOT contain `@apply`
5. Verify fonts.ts exports inter, orbitron, and jetbrainsMono
  </verify>
  <done>All dependencies installed at correct versions. PostCSS config, Tailwind theme CSS, font definitions, and cn utility all exist with correct content following landing app patterns.</done>
</task>

<task type="auto">
  <name>Task 2: Configure next-intl routing and create bilingual page structure</name>
  <files>
    apps/spechack/next.config.ts
    apps/spechack/src/i18n/routing.ts
    apps/spechack/src/i18n/request.ts
    apps/spechack/src/proxy.ts
    apps/spechack/src/app/layout.tsx
    apps/spechack/src/app/[locale]/layout.tsx
    apps/spechack/src/app/[locale]/page.tsx
    apps/spechack/src/app/[locale]/not-found.tsx
    apps/spechack/messages/es.json
    apps/spechack/messages/en.json
  </files>
  <action>
Set up next-intl bilingual routing with always-prefix pattern and create the page structure. Follow the landing app patterns exactly.

**next.config.ts** - Update existing file to add next-intl plugin:
```typescript
import type { NextConfig } from "next";
import createNextIntlPlugin from "next-intl/plugin";

const withNextIntl = createNextIntlPlugin();

const nextConfig: NextConfig = {
	transpilePackages: ["@404tf/database", "@404tf/config"],
};

export default withNextIntl(nextConfig);
```

IMPORTANT: No top-level `await` in next.config.ts (causes ERR_REQUIRE_ASYNC_MODULE).

**src/i18n/routing.ts** - Routing config:
```typescript
import { defineRouting } from "next-intl/routing";

export const routing = defineRouting({
	locales: ["es", "en"],
	defaultLocale: "es",
	localePrefix: "always",
});
```

**src/i18n/request.ts** - Request config with message loading:
```typescript
import { hasLocale } from "next-intl";
import { getRequestConfig } from "next-intl/server";
import { routing } from "./routing";

export default getRequestConfig(async ({ requestLocale }) => {
	const requested = await requestLocale;
	const locale = hasLocale(routing.locales, requested) ? requested : routing.defaultLocale;

	return {
		locale,
		messages: (await import(`../../messages/${locale}.json`)).default,
	};
});
```

**src/proxy.ts** - MUST be at `src/proxy.ts` (NOT inside src/app/). This is the next-intl middleware:
```typescript
import createMiddleware from "next-intl/middleware";
import { routing } from "@/i18n/routing";

export default createMiddleware(routing);

export const config = {
	matcher: "/((?!api|trpc|_next|_vercel|.*\\..*).*)",
};
```

**src/app/layout.tsx** - Replace existing bare layout with root layout that loads fonts and imports globals.css:
- Import `@/styles/globals.css`
- Import font definitions from `@/styles/fonts`
- Import `cn` from `@/lib/utils`
- Import `getLocale` from `next-intl/server`
- Get locale via `await getLocale()`
- Render `<html lang={locale}>` with font CSS variable classes on html element
- Render `<body>` with classes: `min-h-screen bg-background font-sans antialiased blueprint-grid`
- Add the blueprint-grid class to body so the grid background renders immediately
- NO PostHog/analytics (not needed for spechack)
- Use named type `Props` for children

**src/app/[locale]/layout.tsx** - Locale layout with NextIntlClientProvider:
- Import `notFound` from next/navigation
- Import `hasLocale, NextIntlClientProvider` from next-intl
- Import `setRequestLocale` from next-intl/server
- Import `routing` from @/i18n/routing
- `generateStaticParams` returns locales array
- Async default function: await params, validate locale with hasLocale, call setRequestLocale, wrap children in NextIntlClientProvider
- For now, skip the full generateMetadata (keep it simple - basic metadata only). Add a simple metadata export with title "SpecHack" and description.

**src/app/[locale]/page.tsx** - Home page that uses translations and demonstrates theme:
- Server component (no "use client")
- Import `getTranslations` from next-intl/server and `setRequestLocale`
- Await params to get locale, call setRequestLocale(locale)
- Get translations with `await getTranslations("home")`
- Render a simple page showing the theme works:
  - Main wrapper with `min-h-screen` and padding
  - h1 with `text-4xl font-bold text-primary` (should render in Orbitron, purple)
  - p with `text-lg text-secondary mt-4` (should render in Inter, cyan) showing subtitle
  - p with `font-mono-accent text-muted-foreground mt-2` showing a mono-spaced line
  - A small div with `bg-card p-4 rounded-lg border mt-8` containing text, to verify card colors work
- This is a VERIFICATION page, not the final landing page. It exists to confirm theme, fonts, and i18n all work.

**src/app/[locale]/not-found.tsx** - Simple 404 page:
- Use `useTranslations` from next-intl
- Display "404" heading with purple gradient text
- Show translated title and description
- Link back to home with "/"

**messages/es.json** - Spanish translations (minimal for foundation):
```json
{
	"home": {
		"title": "SpecHack 2025",
		"subtitle": "El hackathon global de 404 Tech Found",
		"mono": "SPEC // HACK // BUILD",
		"card": "Sistema de identidad de trading cards para hackers"
	},
	"NotFound": {
		"title": "Pagina no encontrada",
		"description": "La pagina que buscas no existe.",
		"backHome": "Volver al inicio"
	}
}
```

**messages/en.json** - English translations:
```json
{
	"home": {
		"title": "SpecHack 2025",
		"subtitle": "The global hackathon by 404 Tech Found",
		"mono": "SPEC // HACK // BUILD",
		"card": "Trading card identity system for hackers"
	},
	"NotFound": {
		"title": "Page not found",
		"description": "The page you are looking for does not exist.",
		"backHome": "Back to home"
	}
}
```

Delete the old `src/app/page.tsx` file since all pages now live under `[locale]/`.
  </action>
  <verify>
1. Run `bun run dev` from apps/spechack/ (or from monorepo root if configured) and confirm it starts without errors
2. Visit `http://localhost:3001/` and confirm it redirects to `http://localhost:3001/es/`
3. Visit `http://localhost:3001/es/` and confirm:
   - Dark background with blueprint grid pattern visible
   - "SpecHack 2025" heading in purple, rendered in Orbitron font
   - Subtitle in cyan, rendered in Inter font
   - Monospace text in JetBrains Mono
   - Card element with distinct background color
4. Visit `http://localhost:3001/en/` and confirm English text appears
5. Run `bun run build` and confirm no build errors
6. Confirm no `@apply` errors during build
  </verify>
  <done>The app runs at localhost:3001 with working bilingual routing (/es/ and /en/), dark theme with blueprint grid, purple/cyan accents, and all three fonts loading correctly. Visiting / redirects to /es/. The build succeeds without errors.</done>
</task>

</tasks>

<verification>
1. `bun run dev` starts without errors on port 3001
2. `http://localhost:3001/` redirects to `/es/`
3. `/es/` shows Spanish content with SpecHack theme (dark bg, blueprint grid, purple heading, cyan subtitle)
4. `/en/` shows English content with same theme
5. `bun run build` completes without errors
6. No `@apply` errors or Tailwind compilation issues
7. Browser dev tools confirm Orbitron loads for headings, Inter for body, JetBrains Mono for mono-accent
8. proxy.ts is at `src/proxy.ts` (not inside src/app/)
</verification>

<success_criteria>
- FOUND-01 SATISFIED: App bootstraps as Next.js 16 with App Router, Tailwind v4 (~4.0.0), and Biome formatting
- FOUND-02 SATISFIED: next-intl configured with [locale] segment, always-prefix routing, proxy.ts at src/proxy.ts
- FOUND-03 SATISFIED: Dark theme with purple/cyan accents, blueprint grid, Orbitron + JetBrains Mono + Inter fonts
- Tailwind v4 CSS custom properties work without @apply errors, confirmed by build + visual rendering
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
