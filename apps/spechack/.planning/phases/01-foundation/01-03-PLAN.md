---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - apps/spechack/src/app/[locale]/_components/animations/MotionDiv.tsx
  - apps/spechack/src/app/[locale]/_components/animations/MotionSection.tsx
  - apps/spechack/src/app/[locale]/_components/animations/MotionSpan.tsx
  - apps/spechack/src/app/[locale]/_components/animations/FadeInSection.tsx
  - apps/spechack/src/app/[locale]/_components/animations/index.ts
autonomous: true

must_haves:
  truths:
    - "Server components can import MotionDiv, MotionSection, MotionSpan, FadeInSection without adding 'use client' to themselves"
    - "Motion wrappers accept standard HTML attributes (className, children, style) plus Framer Motion props (initial, animate, whileInView, transition, variants)"
    - "FadeInSection wraps children with scroll-triggered fade-in animation (opacity 0->1, y 40->0)"
    - "All wrapper components are marked 'use client' and do not leak client boundary to parent components"
  artifacts:
    - path: "apps/spechack/src/app/[locale]/_components/animations/MotionDiv.tsx"
      provides: "Client-boundary wrapper for motion.div"
      contains: "use client"
    - path: "apps/spechack/src/app/[locale]/_components/animations/MotionSection.tsx"
      provides: "Client-boundary wrapper for motion.section"
      contains: "use client"
    - path: "apps/spechack/src/app/[locale]/_components/animations/MotionSpan.tsx"
      provides: "Client-boundary wrapper for motion.span"
      contains: "use client"
    - path: "apps/spechack/src/app/[locale]/_components/animations/FadeInSection.tsx"
      provides: "Scroll-triggered fade-in wrapper"
      contains: "whileInView"
    - path: "apps/spechack/src/app/[locale]/_components/animations/index.ts"
      provides: "Barrel re-export for all animation wrappers"
      contains: "MotionDiv"
  key_links:
    - from: "apps/spechack/src/app/[locale]/_components/animations/MotionDiv.tsx"
      to: "framer-motion"
      via: "motion.div import"
      pattern: 'import.*motion.*from.*framer-motion'
    - from: "apps/spechack/src/app/[locale]/_components/animations/FadeInSection.tsx"
      to: "framer-motion"
      via: "motion.div with whileInView"
      pattern: "whileInView"
---

<objective>
Create Framer Motion wrapper components that act as client-boundary isolators, allowing server components to use animations without becoming client components themselves.

Purpose: Framer Motion requires DOM access ("use client"), but marking a component as "use client" cascades to all its children unless isolated. These wrappers contain the client boundary so that server components (which will render all static landing content in Phase 2) can freely use animations. This is the pattern established by the landing app.

Output: Four animation wrapper components (MotionDiv, MotionSection, MotionSpan, FadeInSection) in the `_components/animations/` directory, each marked "use client", plus a barrel export file.
</objective>

<execution_context>
@/home/hybridz/.claude/get-shit-done/workflows/execute-plan.md
@/home/hybridz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Framer Motion wrapper components</name>
  <files>
    apps/spechack/src/app/[locale]/_components/animations/MotionDiv.tsx
    apps/spechack/src/app/[locale]/_components/animations/MotionSection.tsx
    apps/spechack/src/app/[locale]/_components/animations/MotionSpan.tsx
    apps/spechack/src/app/[locale]/_components/animations/FadeInSection.tsx
    apps/spechack/src/app/[locale]/_components/animations/index.ts
  </files>
  <action>
Create the `_components/animations/` directory under `src/app/[locale]/` and add these files:

**MotionDiv.tsx** - Generic motion.div wrapper:
```typescript
"use client";

import { type HTMLMotionProps, motion } from "framer-motion";

type MotionDivProps = HTMLMotionProps<"div"> & {
	children?: React.ReactNode;
};

export function MotionDiv({ children, ...props }: MotionDivProps) {
	return <motion.div {...props}>{children}</motion.div>;
}
```

This pattern uses `HTMLMotionProps<"div">` from framer-motion to accept ALL valid motion.div props (initial, animate, whileInView, transition, variants, drag, layout, etc.) plus standard div HTML attributes. This makes the wrapper fully transparent -- any animation configuration is passed through.

**MotionSection.tsx** - Same pattern but for motion.section:
```typescript
"use client";

import { type HTMLMotionProps, motion } from "framer-motion";

type MotionSectionProps = HTMLMotionProps<"section"> & {
	children?: React.ReactNode;
};

export function MotionSection({ children, ...props }: MotionSectionProps) {
	return <motion.section {...props}>{children}</motion.section>;
}
```

**MotionSpan.tsx** - Same pattern for motion.span (used for text animations, staggered character reveals):
```typescript
"use client";

import { type HTMLMotionProps, motion } from "framer-motion";

type MotionSpanProps = HTMLMotionProps<"span"> & {
	children?: React.ReactNode;
};

export function MotionSpan({ children, ...props }: MotionSpanProps) {
	return <motion.span {...props}>{children}</motion.span>;
}
```

**FadeInSection.tsx** - Pre-configured scroll-triggered fade-in (matches landing app exactly):
```typescript
"use client";

import { motion } from "framer-motion";

type FadeInSectionProps = {
	children: React.ReactNode;
	className?: string;
};

export function FadeInSection({ children, className }: FadeInSectionProps) {
	return (
		<motion.div
			initial={{ opacity: 0, y: 40 }}
			whileInView={{ opacity: 1, y: 0 }}
			transition={{ duration: 0.6, ease: "easeOut" }}
			viewport={{ once: true, margin: "-80px" }}
			className={className}
		>
			{children}
		</motion.div>
	);
}
```

**index.ts** - Barrel re-export (this is the ONLY barrel file allowed -- for the animations directory since these are always imported together):
```typescript
export { FadeInSection } from "./FadeInSection";
export { MotionDiv } from "./MotionDiv";
export { MotionSection } from "./MotionSection";
export { MotionSpan } from "./MotionSpan";
```

All components use named exports (no default exports per project convention).
All components have "use client" as the FIRST line.
  </action>
  <verify>
1. Run `bun run build` from apps/spechack/ and confirm no build errors
2. Verify each file starts with "use client"
3. Verify each file uses named exports (not default exports)
4. Verify MotionDiv, MotionSection, MotionSpan accept HTMLMotionProps (type-safe animation props)
5. Verify FadeInSection has whileInView configuration matching landing app
  </verify>
  <done>Four Framer Motion wrapper components exist in _components/animations/, each marked "use client" with named exports. MotionDiv/MotionSection/MotionSpan accept full HTMLMotionProps for any animation. FadeInSection provides pre-configured scroll-triggered fade-in. The barrel index.ts re-exports all four.</done>
</task>

<task type="auto">
  <name>Task 2: Verify motion wrappers work in server component context</name>
  <files>
    apps/spechack/src/app/[locale]/page.tsx
  </files>
  <action>
Update the home page (server component from Plan 01) to import and use FadeInSection and MotionDiv to verify:
1. Server component can import from `_components/animations` without "use client" cascade
2. Animations render correctly in the browser
3. The page.tsx remains a server component (no "use client" directive)

Modify `src/app/[locale]/page.tsx` to wrap the existing content with FadeInSection:

```typescript
import { getTranslations, setRequestLocale } from "next-intl/server";
import { FadeInSection, MotionDiv } from "./_components/animations";

type Props = {
	params: Promise<{ locale: string }>;
};

export default async function HomePage({ params }: Props) {
	const { locale } = await params;
	setRequestLocale(locale);
	const t = await getTranslations("home");

	return (
		<main className="min-h-screen px-6 py-20">
			<FadeInSection>
				<h1 className="text-4xl font-bold text-primary">
					{t("title")}
				</h1>
				<p className="text-lg text-secondary mt-4">
					{t("subtitle")}
				</p>
			</FadeInSection>

			<FadeInSection className="mt-12">
				<p className="font-mono-accent text-muted-foreground">
					{t("mono")}
				</p>
			</FadeInSection>

			<FadeInSection className="mt-8">
				<MotionDiv
					className="bg-card p-6 rounded-lg border max-w-md"
					whileHover={{ scale: 1.02 }}
					transition={{ type: "spring", stiffness: 300 }}
				>
					<p className="text-card-foreground">
						{t("card")}
					</p>
				</MotionDiv>
			</FadeInSection>
		</main>
	);
}
```

Key verification points:
- page.tsx does NOT have "use client" at the top -- it remains a server component
- FadeInSection and MotionDiv are imported from the animations barrel
- The `getTranslations` call (server-only API) works, proving this is a server component
- MotionDiv receives whileHover and transition props, proving HTMLMotionProps pass-through works
  </action>
  <verify>
1. Confirm `src/app/[locale]/page.tsx` does NOT contain "use client"
2. Run `bun run dev` and visit `http://localhost:3001/es/`
3. Confirm the page renders with:
   - Fade-in animation on scroll (elements appear with opacity transition)
   - Hover effect on the card element (slight scale)
   - All text is bilingual (switches between /es/ and /en/)
   - Dark theme with blueprint grid background visible
4. Run `bun run build` and confirm no errors (server component correctly compiles with client wrapper imports)
5. Check browser console for any React hydration warnings -- there should be none
  </verify>
  <done>The home page is a server component that successfully uses FadeInSection and MotionDiv animation wrappers without becoming a client component. Animations render in the browser. The build succeeds. No "use client" cascade occurs -- getTranslations (server-only API) works, proving server component status is maintained.</done>
</task>

</tasks>

<verification>
1. `bun run build` succeeds with no errors
2. All 4 wrapper components exist in `_components/animations/` with "use client" directive
3. page.tsx is a server component (uses getTranslations, no "use client" directive)
4. page.tsx imports and uses FadeInSection and MotionDiv successfully
5. Browser shows fade-in animation on page load
6. Browser shows hover scale on card element
7. No hydration warnings in console
</verification>

<success_criteria>
- FOUND-04 SATISFIED: Framer Motion wrappers created as reusable client components (MotionDiv, MotionSection, MotionSpan, FadeInSection) to avoid client component cascade
- Server components can import and use animation wrappers without "use client" propagation
- All Phase 1 requirements (FOUND-01 through FOUND-05) are now complete across all three plans
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
