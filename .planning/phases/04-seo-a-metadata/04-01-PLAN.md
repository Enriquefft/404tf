---
phase: 04-seo-metadata
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/metadata/seo-config.ts
  - src/env/client.ts
  - .env.example
  - .env.local
  - messages/es.json
  - messages/en.json
  - src/app/[locale]/layout.tsx
  - src/lib/metadata/json-ld/organization.tsx
  - src/lib/metadata/json-ld/event.tsx
  - src/lib/metadata/json-ld/faq.tsx
  - src/app/[locale]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Viewing page source at /es shows Spanish title, Spanish description, canonical /es, and hreflang alternates for both /es and /en"
    - "Viewing page source at /en shows English title, English description, canonical /en, and hreflang alternates for both /es and /en"
    - "Page source contains JSON-LD script tags for Organization (name: 404 Tech Found, sameAs social links) and Event (SpecHack, startDate: 2026-06-19)"
    - "Open Graph meta tags (og:title, og:description, og:url, og:locale) are present and locale-specific"
    - "Twitter Card meta tags (twitter:card summary_large_image, twitter:title, twitter:description) are present"
  artifacts:
    - path: "src/lib/metadata/seo-config.ts"
      provides: "Central SEO constants (site URL, site name, social links)"
      contains: "SITE_URL"
    - path: "src/app/[locale]/layout.tsx"
      provides: "generateMetadata with per-locale metadata, hreflang, canonical, OG, Twitter"
      exports: ["generateMetadata"]
    - path: "src/lib/metadata/json-ld/organization.tsx"
      provides: "Organization JSON-LD schema component"
      exports: ["OrganizationSchema"]
    - path: "src/lib/metadata/json-ld/event.tsx"
      provides: "Event JSON-LD schema component for SpecHack"
      exports: ["EventSchema"]
    - path: "src/lib/metadata/json-ld/faq.tsx"
      provides: "FAQPage JSON-LD schema component"
      exports: ["FAQPageSchema"]
  key_links:
    - from: "src/app/[locale]/layout.tsx"
      to: "src/lib/metadata/seo-config.ts"
      via: "import SITE_URL and SEO constants"
      pattern: "import.*seo-config"
    - from: "src/app/[locale]/layout.tsx"
      to: "next-intl/server"
      via: "getTranslations for locale-aware metadata"
      pattern: "getTranslations.*metadata"
    - from: "src/app/[locale]/page.tsx"
      to: "src/lib/metadata/json-ld/*"
      via: "JSON-LD components rendered in page"
      pattern: "OrganizationSchema|EventSchema|FAQPageSchema"
---

<objective>
Add per-locale SEO metadata, Open Graph/Twitter Card tags, and JSON-LD structured data to the 404 Tech Found landing page.

Purpose: Make the landing page discoverable by search engines with proper locale-specific metadata, enable rich snippets via structured data, and ensure social sharing shows correct locale-specific titles and descriptions.

Output: generateMetadata in locale layout producing per-locale titles/descriptions/canonical/hreflang/OG/Twitter tags, plus JSON-LD Organization, Event (SpecHack), and FAQPage schemas rendered in the page.
</objective>

<execution_context>
@/home/hybridz/.claude/get-shit-done/workflows/execute-plan.md
@/home/hybridz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-seo-a-metadata/04-RESEARCH.md
@src/app/[locale]/layout.tsx
@src/app/[locale]/page.tsx
@src/env/client.ts
@messages/es.json
@messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: SEO config, environment variables, and metadata translations</name>
  <files>
    src/lib/metadata/seo-config.ts
    src/env/client.ts
    .env.example
    .env.local
    messages/es.json
    messages/en.json
  </files>
  <action>
    1. Create `src/lib/metadata/seo-config.ts` as the single source of truth for SEO constants:
       ```typescript
       export const SITE_URL = process.env.NEXT_PUBLIC_SITE_URL || "https://404techfound.org";
       export const SITE_NAME = "404 Tech Found";
       export const SOCIAL_LINKS = {
         linkedin: "https://linkedin.com/company/404techfound",
         twitter: "https://x.com/404techfound",
         instagram: "https://instagram.com/404techfound",
         discord: "https://discord.gg/404techfound",
       };
       export const CONTACT_EMAIL = "hola@404techfound.com";
       ```

    2. Add `NEXT_PUBLIC_SITE_URL` to the t3-env client schema in `src/env/client.ts`:
       - Add `NEXT_PUBLIC_SITE_URL: z.string().url().optional()` to client schema
       - Add `NEXT_PUBLIC_SITE_URL: process.env.NEXT_PUBLIC_SITE_URL` to runtimeEnv
       - Make it optional so dev works without it (seo-config.ts has fallback)

    3. Update `.env.example` to add:
       ```
       # SEO (Phase 4)
       NEXT_PUBLIC_SITE_URL=https://404techfound.org
       ```

    4. Update `.env.local` to add:
       ```
       NEXT_PUBLIC_SITE_URL=https://404techfound.org
       ```

    5. Add `metadata` namespace to both `messages/es.json` and `messages/en.json` at the TOP level (sibling to "landing"):
       ```json
       // es.json additions
       "metadata": {
         "siteName": "404 Tech Found",
         "title": "404 Tech Found — Pre-incubadora Deep-Tech de LATAM",
         "description": "Convertimos ciencia de frontera en startups escalables. Comunidad, programas y eventos para fundadores deep-tech en Latinoamérica.",
         "ogImageAlt": "404 Tech Found — Pre-incubadora Deep-Tech de LATAM",
         "tagline": "Pre-incubadora Deep-Tech de LATAM"
       }

       // en.json additions
       "metadata": {
         "siteName": "404 Tech Found",
         "title": "404 Tech Found — LATAM Deep-Tech Pre-Incubator",
         "description": "Turning breakthrough science into venture-grade startups. Community, programs, and events for deep-tech founders in Latin America.",
         "ogImageAlt": "404 Tech Found — LATAM Deep-Tech Pre-Incubator",
         "tagline": "LATAM Deep-Tech Pre-Incubator"
       }
       ```

    6. Also add `faq` namespace to both message files for FAQPage schema content:
       ```json
       // es.json additions (under "landing" or as top-level sibling)
       "faq": {
         "q1": "¿Qué es 404 Tech Found?",
         "a1": "404 Tech Found es una pre-incubadora deep-tech en Latinoamérica que convierte ciencia de frontera en startups escalables a través de programas de mentoría, financiamiento y una comunidad de fundadores.",
         "q2": "¿Qué programas ofrecen?",
         "a2": "Ofrecemos Pre-Incubación (12 semanas de mentoría 1-a-1 y workshops), Fellowship (6 meses de financiamiento sin equity y acceso a lab), y Bootcamp (8 semanas de patentes y transferencia tecnológica).",
         "q3": "¿Qué es SpecHack?",
         "a3": "SpecHack es un hackathon global de 10 días (Jun 19-28, 2026) donde escribes la especificación primero y construyes con IA después. Incluye hubs presenciales y track virtual.",
         "q4": "¿Cuáles son las tres casas?",
         "a4": "Las tres casas son: Casa AI (inteligencia artificial y agentes autónomos), Casa Biotech (biología sintética y diagnóstico molecular), y Casa Hardware (robótica, IoT industrial y dispositivos médicos)."
       }

       // en.json additions
       "faq": {
         "q1": "What is 404 Tech Found?",
         "a1": "404 Tech Found is a LATAM deep-tech pre-incubator that turns breakthrough science into venture-grade startups through mentorship programs, funding, and a founder community.",
         "q2": "What programs do you offer?",
         "a2": "We offer Pre-Incubation (12 weeks of 1-on-1 mentorship and workshops), Fellowship (6 months of equity-free funding and lab access), and Bootcamp (8 weeks of patents and technology transfer).",
         "q3": "What is SpecHack?",
         "a3": "SpecHack is a 10-day global hackathon (Jun 19-28, 2026) where you write the spec first and build with AI second. It includes in-person hubs and a virtual track.",
         "q4": "What are the three houses?",
         "a4": "The three houses are: House AI (artificial intelligence and autonomous agents), House Biotech (synthetic biology and molecular diagnostics), and House Hardware (robotics, industrial IoT, and medical devices)."
       }
       ```
  </action>
  <verify>
    - `bun run check` passes (Biome lint + format)
    - `bun dev` starts without env validation errors
    - Verify `NEXT_PUBLIC_SITE_URL` is accessible: add a temporary console.log in seo-config.ts and check dev server output, then remove it
  </verify>
  <done>
    - seo-config.ts exports SITE_URL, SITE_NAME, SOCIAL_LINKS, CONTACT_EMAIL
    - NEXT_PUBLIC_SITE_URL is in env schema (optional), .env.example, and .env.local
    - Both es.json and en.json have "metadata" and "faq" namespaces with translated content
  </done>
</task>

<task type="auto">
  <name>Task 2: generateMetadata with per-locale SEO, OG, and Twitter tags</name>
  <files>
    src/app/[locale]/layout.tsx
  </files>
  <action>
    Add `generateMetadata` export to `src/app/[locale]/layout.tsx`. This covers SEO-01 (per-locale metadata), SEO-08 (OG + Twitter tags).

    Import `getTranslations` from "next-intl/server" (already used elsewhere in the project) and `SITE_URL, SITE_NAME` from "@/lib/metadata/seo-config".

    CRITICAL Next.js 16 pattern: `params` is a Promise, must use `const { locale } = await params;`.

    ```typescript
    import type { Metadata } from "next";
    import { getTranslations } from "next-intl/server";
    import { SITE_NAME, SITE_URL } from "@/lib/metadata/seo-config";

    export async function generateMetadata({
      params,
    }: {
      params: Promise<{ locale: string }>;
    }): Promise<Metadata> {
      const { locale } = await params;
      const t = await getTranslations({ locale, namespace: "metadata" });

      return {
        metadataBase: new URL(SITE_URL),
        title: {
          template: `%s | ${SITE_NAME}`,
          default: t("title"),
        },
        description: t("description"),
        alternates: {
          canonical: `/${locale}`,
          languages: {
            es: "/es",
            en: "/en",
          },
        },
        openGraph: {
          title: t("title"),
          description: t("description"),
          url: `/${locale}`,
          siteName: SITE_NAME,
          locale: locale === "es" ? "es_ES" : "en_US",
          type: "website",
          images: [
            {
              url: `/${locale}/opengraph-image`,
              width: 1200,
              height: 630,
              alt: t("ogImageAlt"),
            },
          ],
        },
        twitter: {
          card: "summary_large_image",
          title: t("title"),
          description: t("description"),
          images: [`/${locale}/opengraph-image`],
        },
        robots: {
          index: true,
          follow: true,
          googleBot: {
            index: true,
            follow: true,
            "max-image-preview": "large",
            "max-snippet": -1,
          },
        },
      };
    }
    ```

    Keep the existing `generateStaticParams` and `LocaleLayout` component unchanged. The `generateMetadata` is a new named export alongside the default export.

    Use Biome formatting conventions: tabs, double quotes.
  </action>
  <verify>
    - `bun run check` passes
    - `bun dev` starts without errors
    - `curl -s http://localhost:3000/es | grep -o '<title>[^<]*</title>'` shows Spanish title
    - `curl -s http://localhost:3000/en | grep -o '<title>[^<]*</title>'` shows English title
    - `curl -s http://localhost:3000/es | grep 'hreflang'` shows both es and en alternates
    - `curl -s http://localhost:3000/es | grep 'og:locale'` shows es_ES
    - `curl -s http://localhost:3000/en | grep 'og:locale'` shows en_US
    - `curl -s http://localhost:3000/es | grep 'canonical'` shows /es
  </verify>
  <done>
    - /es page source has Spanish title, Spanish description, canonical /es, hreflang for es and en, og:locale es_ES, twitter:card summary_large_image
    - /en page source has English title, English description, canonical /en, hreflang for es and en, og:locale en_US, twitter:card summary_large_image
    - metadataBase is set to SITE_URL (resolves relative URLs to absolute)
  </done>
</task>

<task type="auto">
  <name>Task 3: JSON-LD structured data schemas (Organization, Event, FAQ)</name>
  <files>
    src/lib/metadata/json-ld/organization.tsx
    src/lib/metadata/json-ld/event.tsx
    src/lib/metadata/json-ld/faq.tsx
    src/app/[locale]/page.tsx
  </files>
  <action>
    Create three JSON-LD schema components as Server Components (no "use client"). These are rendered in the page and output `<script type="application/ld+json">` tags.

    1. `src/lib/metadata/json-ld/organization.tsx` (SEO-02):
       - Import SITE_URL, SITE_NAME, SOCIAL_LINKS, CONTACT_EMAIL from seo-config
       - Schema: @type Organization, name, url, logo (SITE_URL + "/logo.png"), description (locale-aware), sameAs (array of social link values), contactPoint with email
       - Accept `locale: string` prop for locale-aware description
       - Use `dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}` pattern

    2. `src/lib/metadata/json-ld/event.tsx` (SEO-03):
       - Schema: @type Event, name "SpecHack 2026", startDate "2026-06-19", endDate "2026-06-28"
       - eventAttendanceMode: MixedEventAttendanceMode
       - location: @type VirtualLocation + @type Place (Honduras)
       - description (locale-aware: ES "Hackathon global de 10 dias..." / EN "10-day global hackathon...")
       - organizer: @type Organization referencing 404 Tech Found
       - Accept `locale: string` prop

    3. `src/lib/metadata/json-ld/faq.tsx` (SEO-04):
       - Import getTranslations from "next-intl/server" (this is an async Server Component)
       - Load translations from "faq" namespace
       - Schema: @type FAQPage, mainEntity array of Question/Answer pairs
       - Use 4 FAQ items (q1-q4, a1-a4 from translations)
       - Accept `locale: string` prop

    4. Add all three schema components to `src/app/[locale]/page.tsx`:
       - Import OrganizationSchema, EventSchema, FAQPageSchema
       - Render them inside the `<main>` element, before other content (top of JSX):
         ```tsx
         <OrganizationSchema locale={locale} />
         <EventSchema locale={locale} />
         <FAQPageSchema locale={locale} />
         ```
       - These render invisible `<script>` tags, so placement doesn't affect layout

    IMPORTANT: Use proper JSON (no trailing commas). Use ISO 8601 dates. Do NOT use JSON.stringify with replacer or space args -- compact JSON for production.
  </action>
  <verify>
    - `bun run check` passes
    - `bun dev` starts without errors
    - `curl -s http://localhost:3000/es | grep 'application/ld+json'` shows 3 script tags
    - `curl -s http://localhost:3000/es | grep -o '"@type":"Organization"'` returns match
    - `curl -s http://localhost:3000/es | grep -o '"@type":"Event"'` returns match
    - `curl -s http://localhost:3000/es | grep -o '"@type":"FAQPage"'` returns match
    - `curl -s http://localhost:3000/es | grep -o '"startDate":"2026-06-19"'` returns match
    - Copy the JSON-LD content and validate it is well-formed JSON (no syntax errors)
  </verify>
  <done>
    - Page source at /es and /en contains 3 JSON-LD script tags: Organization, Event, FAQPage
    - Organization schema has name "404 Tech Found", sameAs with social links, contactPoint with email
    - Event schema has SpecHack with dates Jun 19-28 2026 in ISO 8601 format
    - FAQPage schema has 4 Q&A pairs in the correct locale language
    - All JSON-LD is valid JSON (no trailing commas, proper quoting)
  </done>
</task>

</tasks>

<verification>
1. `bun run check` passes with zero errors
2. `bun dev` starts without errors
3. Page source at /es shows: Spanish title, Spanish description, canonical /es, hreflang es + en, og:locale es_ES, og:title in Spanish, twitter:card, 3 JSON-LD scripts
4. Page source at /en shows: English title, English description, canonical /en, hreflang es + en, og:locale en_US, og:title in English, twitter:card, 3 JSON-LD scripts
5. No "use client" directives in any new files (all Server Components or pure modules)
</verification>

<success_criteria>
- SEO-01: generateMetadata produces per-locale titles, descriptions, canonical URLs, hreflang alternates
- SEO-02: JSON-LD Organization schema with name, url, logo, sameAs social links
- SEO-03: JSON-LD Event schema for SpecHack with ISO 8601 dates
- SEO-04: JSON-LD FAQPage schema with 4 locale-aware Q&A pairs
- SEO-08: Open Graph (og:title, og:description, og:url, og:locale, og:image) and Twitter Card (summary_large_image) meta tags present
</success_criteria>

<output>
After completion, create `.planning/phases/04-seo-a-metadata/04-01-SUMMARY.md`
</output>
